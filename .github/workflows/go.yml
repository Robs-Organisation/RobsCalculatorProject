# Altes Workflow File 
name: Go

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  checkout_rpm:
    name: chechout Rpm
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: check if rpm works
        run: rpmbuild --help

      - name: Create the folder tree
        run: mkdir -p /home/runner/rpmbuild/{SPECS,SOURCES,BUILD,BUILDROOT,RPMS,SRPMS}
      
      - name: check for path
        run: pwd
      
      - name: Copy all the source files into SOURCES
        run: cd /home/runner/work/RobsCalculatorProject/RobsCalculatorProject/rpmbuild/sourceCode; cp -R * /home/runner/rpmbuild/SOURCES

      - name: build .tar.gz
        run: cd /home/runner/rpmbuild/SOURCES; tar -czvf CalcBuffaloBinary-1.0.tar.gz /home/runner/rpmbuild/SOURCES

      - name: move .spec File to /SPECS
        run: mv /home/runner/work/RobsCalculatorProject/RobsCalculatorProject/calculator.spec /home/runner/rpmbuild/SPECS
        
      - name: run rpmbuild
        run: rpmbuild -ba /home/runner/rpmbuild/SPECS/calculator.spec
      
      - name: check 
        run: ls; tree
